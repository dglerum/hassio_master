#################################################################
#                      Packages/Apple Homekit                   #
#################################################################

homekit:
  auto_start: false
  ip_address: !secret rPi
  filter:
    include_entities:
      ## Lights
      - light.fibaro_kitchen_dimmer_level
      - light.fibaro_table_dimmer_level
      - light.fibaro_hallway_dimmer_level
      - light.fibaro_stair_dimmer_level
      ## Switches
      - switch.radio
      - switch.wemo_livingroom
      - switch.wemo_bedroom
      - switch.tv
      - switch.kodi
      ## Sensors
      - sensor.fibaro_system_fgsd002_smoke_sensor_temperature
      ## Device Tracker
      # - device_tracker.davy_bayesian

group:
  radio player:
    control: hidden
    entities:
      - input_boolean.radio

################################################
## Apple Tv
################################################

apple_tv:
  host: 192.168.1.17
  login_id: 00000000-0bb2-01aa-38f0-982da7c149f9
  credentials: ACCAC76047A3862F:1A2D831F20BEA13175030443D8EE2B5903C956FE55762F4AF9C775ED6F7F4AB2
  start_off: true

################################################
## Input Boolean
################################################

input_boolean:
  radio:
    initial: off
    name: HomePod Radio
    icon: mdi:radio

################################################
## Automation
################################################

automation:
- id: Radio_On
  alias: Radio_On
  initial_state: 'on'
  trigger:
  - platform: state
    entity_id: input_boolean.radio
    to: 'on'
  condition: []
  action:
  - service: media_player.turn_on
    data:
      entity_id: media_player.apple_tv
  - service: media_player.play_media
    data:
      entity_id: media_player.apple_tv
      media_content_id: http://www.listenlive.eu/streams/belgium/be_vrtstubru.m3u
      media_content_type: music

- id: Radio_Off
  alias: Radio_Off
  initial_state: 'on'
  trigger:
  - platform: state
    entity_id: input_boolean.radio
    to: 'off'
  condition: []
  action:
  - service: media_player.media_stop
    data:
      entity_id: media_player.apple_tv
  # - service: media_player.media_stop
  #   data:
  #     entity_id: media_player.apple_tv
  # - service: media_player.turn_off
  #   data:
  #     entity_id: media_player.apple_tv
